/**
 * Created by zhangzhi on 16/6/20.
 */

var num1, num2, num3, num4;
num1 = 1;
num2 = 2;
num3 = 3;
num4 = 4;

//目的求解所有解
//使用 (+ - * /)使得计算结果为24
//将四个数字进行全排列 ,a,b,c,d   a a,b,c  a,a,b,b, a,a,a,b, a,a,a,a;
var pailie = [[0, 1, 2, 3], [0, 1, 3, 2], [0, 2, 3, 1], [0, 2, 1, 3], [0, 3, 1, 2], [0, 3, 2, 1],
    [1, 0, 2, 3], [1, 0, 3, 2], [1, 2, 3, 0], [1, 2, 0, 3], [1, 3, 0, 2], [1, 3, 2, 0],
    [2, 1, 0, 3], [2, 1, 3, 0], [2, 0, 1, 3], [2, 0, 3, 1], [2, 0, 1, 3], [2, 3, 0, 1],
    [3, 1, 2, 0], [3, 1, 0, 2], [3, 2, 0, 1], [3, 2, 1, 0], [3, 0, 1, 2], [3, 0, 2, 1]];

//4 个数 取2个 4*3 = 12

//c,0-5;+ - - * / \
function method(a, b, c) {
    switch (c) {
        case 0:
            return a + b;
        case 1:
            return a - b;
        case 2:
            return a * b;
        case 3:
            return a / b;
        case 4:
            return b - a;
        case 5:
            return b / a;
            throw new Error("只能是0-5")
    }
}


//算法缺少 （a+-b）*/(c-d) 及
function execute(num) {
    var result = [];
    var res;
    for (var m = 0; m < pailie.length; m++) {
        for (var i = 0; i < 6; i++) {
            for (var j = 0; j < 6; j++) {
                for (var k = 0; k < 6; k++) {
                    res = cal(num,[m,i,j,k])
                    if (res) {
                        if(result.indexOf(res)==-1) {
                            result.push(res);
                        }
                    }
                    //另一种计算
                    res = cal2(num,[m,i,j,k])
                    if (res) {
                        if(result.indexOf(res)==-1) {
                            result.push(res);
                        }
                    }
                }
            }
        }
    }
    return result;
}

function cal(num,res) {
    var p = pailie[res[0]];
   var t = method(method(method(num[p[0]], num[p[1]], res[1]), num[p[2]], res[2]), num[p[3]], res[3]);
    if(t==24||t>23.9999&t<24.0001) {
        return print(num, res);
    }
}

var sys = [" + "," - "," * "," / "]
function cal2(num,res) {
    var p = pailie[res[0]];
    var num=[num[p[0]],num[p[1]],num[p[2]],num[p[3]]];
    if((res[1]==0||res[1]==1) && (res[2]==0||res[2]==1) && (res[3]==2||res[3]==3)/**||res[2]==4||res[2==5]*/) {
        var t = method(method(num[0], num[1], res[1]), method(num[2],num[3], res[2]), res[3]);
        if(t==24||t>23.9999&t<24.0001) {
            return "("+num[0]+sys[res[1]]+num[1]+")"+sys[3]+"("+num[2]+sys[2]+num[3]+") =24";

        }
    }
    if((res[1]==2||res[1]==3) && (res[2]==2||res[2]==3) && (res[3]==0||res[3]==1) ) {
        var t = method(method(num[0], num[1], res[1]), method(num[2],num[3], res[2]), res[3]);
        if(t==24||t>23.9999&t<24.0001) {
            return num[0]+sys[res[1]]+num[1]+sys[res[3]]+num[2]+sys[res[2]]+num[3]+" =24";
        }
    }
}



function methodP(a, b, c,last) {
    switch (c) {
        case 0:
            return a + " + " + b;
        case 1:

            return a + " - " + b;
        case 2:
            if(last==0||last==1||last==4) {
                a="("+a+")";
            }
            return a + " * " + b;
        case 3:
            if(last==0||last==1||last==4) {
                a="("+a+")";
            }
            return a + " / " + b;
        case 4:
            if(last == 4) {
                a="("+a+")";//这里如果可以去括号就好了
            }
            return b + " - " + a;
        case 5:
            if(last!=undefined) {
                a="("+a+")";
            }
            return b + " / " + a;
            throw new Error("只能是0-5")
    }
}

function print(num, res) {
    var p = pailie[res[0]];
    var s = methodP(methodP(methodP(num[p[0]],num[p[1]],res[1]),num[p[2]],res[2],res[1]),num[p[3]],res[3],res[2]);
    s+=" = 24";
    return s;
}

arr1 = [[1,2,7,7],[1,3,4,6],[1,3,8,10],[1,3,9,9],[1,4,5,6],[1,4,8,9],[1,5,5,5],[1,6,6,8],[2,2,5,5],[2,2,5,6],[1,2,7,7],[1,3,3,9],[2,5,5,10],[2,6,6,7],[2,8,8,8],[3,3,3,9],[3,3,4,7],[3,3,5,5],[3,3,8,8],[3,5,5,9],[3,5,6,8],[3,5,10,10],[3,6,8,9],[3,6,10,10],[3,7,7,9],[3,8,8,10],[3,9,10,10],[4,4,5,5],[4,4,5,6],[4,5,5,7],[4,5,5,8],[4,5,8,8],[4,7,7,7],[4,7,7,8],[4,7,8,9],[4,7,9,9],[4,7,10,10],[4,8,9,9],[5,5,5,5],[5,5,8,8],[5,5,9,9],[5,5,10,10],[5,6,6,6],[5,6,7,7],[5,8,8,9],[6,6,8,8],[6,7,8,9],[6,8,8,10],[7,8,9,10],[4,4,7,7],[1,3,4,6],[1,3,8,10],[1,3,9,9],[1,4,5,6],[1,4,8,9],[1,5,5,5],[1,6,6,8],[2,2,5,5],[2,2,5,6],[2,5,5,10],[2,6,6,7],[2,8,8,8],[3,3,3,9],[3,3,4,7],[3,3,5,5],[3,3,8,8],[3,5,5,9],[3,5,6,8],[3,5,10,10],[3,6,8,9],[3,6,10,10],[3,7,7,9],[3,8,8,10],[3,9,10,10],[4,4,5,5],[4,4,5,6],[4,4,7,7],[4,4,10,10],[4,5,5,7],[4,5,5,8],[4,5,8,8],[4,7,7,7],[4,7,7,8],[4,7,8,9],[4,7,9,9],[4,7,10,10],[4,8,9,9],[5,5,5,5],[5,5,8,8],[5,5,9,9],[5,5,10,10],[5,6,6,6],[5,6,7,7],[5,8,8,9],[6,6,8,8],[6,7,8,9],[6,8,8,10],[7,8,9,10]];
arr2 = [[1,1,6,8],[1,2,8,9],[1,3,7,9],[1,3,8,9],[2,2,3,6],[2,2,3,7],[2,2,6,6],[2,2,6,9],[1,2,8,9],[2,3,4,9],[2,3,6,7],[2,3,7,8],[2,3,7,9],[2,4,5,7],[2,4,6,8],[2,4,10,10],[2,5,5,8],[2,5,6,9],[2,5,6,10],[2,5,10,10],[2,6,8,9],[2,6,9,9],[2,7,7,10],[2,8,10,10],[2,9,10,10],[3,3,4,5],[3,3,6,6],[3,3,7,7],[3,4,5,10],[3,4,9,9],[3,5,6,7],[3,5,9,9],[3,5,9,10],[3,6,7,10],[3,6,8,8],[4,4,4,5],[4,5,8,10],[4,5,9,9],[4,5,10,10],[4,6,6,10],[4,6,7,9],[4,7,8,10],[4,8,8,8],[5,5,7,10],[5,5,8,10],[5,6,6,10],[5,6,8,9],[5,6,8,10],[5,6,10,10],[5,7,10,10],[6,6,6,9],[6,6,9,10],[6,8,9,9],[6,9,9,10],[1,3,7,9],[1,3,8,9],[2,2,3,6],[2,2,3,7],[2,2,6,6],[2,2,6,9],[2,2,7,10],[2,3,4,9],[2,3,6,7],[2,3,7,8],[2,3,7,9],[2,4,5,7],[2,4,6,8],[2,4,10,10],[2,5,5,8],[2,5,6,9],[2,5,6,10],[2,5,10,10],[2,6,8,9],[2,6,9,9],[2,7,7,10],[2,8,10,10],[2,9,10,10],[3,3,4,5],[3,3,6,6],[3,3,7,7],[3,4,5,10],[3,4,9,9],[3,5,6,7],[3,5,9,9],[3,5,9,10],[3,6,7,10],[3,6,8,8],[4,4,4,5],[4,5,8,10],[4,5,9,9],[4,5,10,10],[4,6,6,10],[4,6,7,9],[4,7,8,10],[4,8,8,8],[5,5,7,10],[5,5,8,10],[5,6,6,10],[5,6,8,9],[5,6,8,10],[5,6,10,10],[5,7,10,10],[6,6,6,9],[6,6,9,10],[6,8,9,9],[6,9,9,10]];
arr3 = [[1,1,5,5],[1,2,2,7],[1,2,2,8],[1,2,2,10],[1,2,3,6],[1,2,3,8],[1,2,3,9],[1,2,3,10],[1,2,4,5],[1,2,4,6],[1,2,4,7],[1,2,4,8],[1,2,4,9],[1,2,5,5],[1,2,5,6],[1,2,5,8],[1,2,5,10],[1,2,6,7],[1,2,6,8],[1,2,6,10],[1,2,7,9],[1,2,8,10],[1,3,3,6],[1,3,3,8],[1,3,3,9],[1,3,3,10],[1,3,4,4],[1,3,4,7],[1,3,4,9],[1,3,4,10],[1,3,5,7],[1,3,5,8],[1,3,5,10],[1,3,6,6],[1,3,6,7],[1,3,6,8],[1,3,6,9],[1,3,6,10],[1,3,7,7],[1,3,7,8],[1,3,7,10],[1,3,8,8],[1,3,9,10],[1,4,4,6],[1,4,4,7],[1,4,4,9],[1,4,4,10],[1,4,5,5],[1,4,5,7],[1,4,5,8],[1,4,5,9],[1,4,5,10],[1,4,6,6],[1,4,6,7],[1,4,6,8],[1,4,6,9],[1,4,6,10],[1,4,7,7],[1,4,7,8],[1,4,7,9],[1,4,8,8],[1,5,5,6],[1,5,5,9],[1,5,5,10],[1,5,6,6],[1,5,6,7],[1,5,6,8],[1,5,6,9],[1,5,6,10],[1,5,7,8],[1,5,7,9],[1,5,7,10],[1,5,8,8],[1,5,8,9],[1,5,10,10],[1,6,6,6],[1,6,6,9],[1,6,6,10],[1,6,7,9],[1,6,8,8],[1,6,9,10],[1,7,7,10],[1,7,8,10],[1,7,9,9],[1,7,9,10],[1,8,8,9],[1,8,8,10],[2,2,2,7],[2,2,2,8],[2,2,3,5],[2,2,3,8],[2,2,3,9],[2,2,3,10],[2,2,4,4],[2,2,4,6],[2,2,4,7],[2,2,4,10],[2,2,5,8],[2,2,5,9],[2,2,6,8],[2,2,6,10],[2,2,7,7],[2,2,7,8],[1,2,2,7],[1,2,2,8],[1,2,2,10],[1,2,3,6],[1,2,3,8],[1,2,3,9],[1,2,3,10],[1,2,4,5],[1,2,4,6],[1,2,4,7],[1,2,4,8],[1,2,4,9],[1,2,5,5],[1,2,5,6],[1,2,5,8],[1,2,5,10],[1,2,6,7],[1,2,6,8],[1,2,6,10],[1,2,7,9],[1,2,8,10],[1,3,3,6],[1,3,3,8],[2,2,8,8],[2,2,8,9],[2,2,8,10],[2,2,9,10],[2,3,3,6],[2,3,3,7],[2,3,3,8],[2,3,3,10],[2,3,4,5],[2,3,4,6],[2,3,4,7],[2,3,4,8],[2,3,4,10],[2,3,5,5],[2,3,5,6],[2,3,5,7],[2,3,5,9],[2,3,5,10],[2,3,6,6],[2,3,6,8],[2,3,6,9],[2,3,6,10],[2,3,7,10],[2,3,8,8],[2,3,8,9],[2,3,10,10],[2,4,4,4],[2,4,4,5],[2,4,4,6],[2,4,4,7],[2,4,4,8],[2,4,4,9],[2,4,4,10],[2,4,5,6],[2,4,5,8],[2,4,5,9],[2,4,6,6],[2,4,6,7],[2,4,6,9],[2,4,6,10],[2,4,7,7],[2,4,7,8],[2,4,7,10],[2,4,8,8],[2,4,8,9],[2,4,9,10],[2,5,5,9],[2,5,6,6],[2,5,6,7],[2,5,6,8],[2,5,7,8],[2,5,7,9],[2,5,8,8],[2,5,8,10],[2,5,9,10],[2,6,6,8],[2,6,6,9],[2,6,7,8],[2,6,7,10],[2,6,8,10],[2,6,9,10],[2,6,10,10],[2,7,8,8],[2,7,8,9],[2,7,9,10],[2,7,10,10],[2,8,8,9],[2,8,8,10],[2,8,9,9],[2,8,9,10],[3,3,3,3],[3,3,3,4],[3,3,3,7],[3,3,3,8],[3,3,3,10],[3,3,4,6],[3,3,4,8],[3,3,5,6],[3,3,5,7],[3,3,5,9],[3,3,6,7],[3,3,6,8],[3,3,6,10],[3,3,7,9],[3,3,8,9],[3,3,9,10],[3,4,4,4],[3,4,4,5],[3,4,4,6],[3,4,4,7],[3,4,4,8],[3,4,4,9],[3,4,4,10],[3,4,5,5],[3,4,5,6],[3,4,5,8],[3,4,5,9],[3,4,6,8],[3,4,6,9],[3,4,6,10],[3,4,7,7],[3,4,7,8],[3,4,7,9],[3,4,8,10],[3,4,10,10],[3,5,5,6],[3,5,5,7],[3,5,5,8],[3,5,6,6],[3,5,6,9],[3,5,7,8],[3,5,7,10],[3,5,8,9],[3,6,6,6],[3,6,6,7],[3,6,6,8],[3,6,6,10],[3,6,7,7],[3,6,7,9],[3,6,8,10],[3,6,9,9],[3,6,9,10],[3,7,7,8],[3,7,7,10],[3,7,8,8],[3,7,8,9],[3,7,9,9],[3,7,9,10],[3,7,10,10],[3,8,8,8],[3,8,8,9],[3,8,9,9],[3,8,9,10],[3,8,10,10],[3,9,9,9],[3,9,9,10],[4,4,4,6],[4,4,4,7],[4,4,4,8],[4,4,4,9],[4,4,4,10],[4,4,5,7],[4,4,5,8],[4,4,5,10],[4,4,6,8],[4,5,5,5],[4,5,5,6],[4,5,5,9],[4,5,6,6],[4,5,6,7],[4,5,6,8],[4,5,6,10],[4,5,7,7],[4,5,7,9],[4,5,7,10],[4,5,8,9],[4,5,9,10],[4,6,6,6],[4,6,6,7],[4,6,6,9],[4,6,7,8],[4,6,7,10],[4,6,8,8],[4,6,8,9],[4,6,8,10],[4,6,9,9],[4,6,9,10],[4,6,10,10],[4,7,8,8],[4,7,9,10],[4,8,8,9],[4,8,8,10],[4,8,9,10],[4,8,10,10],[4,9,9,10],[5,5,5,6],[5,5,6,6],[5,5,6,7],[5,5,7,8],[5,5,8,9],[5,5,9,10],[5,6,6,8],[5,6,6,9],[5,6,7,8],[5,6,7,9],[5,6,8,8],[5,6,9,9],[5,6,9,10],[5,7,7,9],[5,7,7,10],[5,7,8,8],[5,7,8,9],[5,7,8,10],[5,7,9,10],[5,8,8,8],[5,8,8,10],[5,9,10,10],[6,6,6,8],[6,6,6,10],[6,6,7,9],[6,6,7,10],[6,6,8,9],[6,6,8,10],[6,7,7,10],[6,7,8,10],[6,7,9,9],[6,7,10,10],[6,8,8,8],[6,8,8,9],[6,8,9,10],[6,10,10,10],[7,7,9,10],[7,8,8,9],[7,8,8,10],[7,8,10,10],[8,8,8,10],[4,4,6,9],[4,4,7,8],[4,4,7,10],[4,4,8,9],[4,4,8,10],[1,3,3,10],[1,3,4,4],[1,3,4,7],[1,3,4,9],[1,3,4,10],[1,3,5,7],[1,3,5,8],[1,3,5,10],[1,3,6,6],[1,3,6,7],[1,3,6,8],[1,3,6,9],[1,3,6,10],[1,3,7,7],[1,3,7,8],[1,3,7,10],[1,3,8,8],[1,3,9,10],[1,4,4,6],[1,4,4,7],[1,4,4,9],[1,4,4,10],[1,4,5,5],[1,4,5,7],[1,4,5,8],[1,4,5,9],[1,4,5,10],[1,4,6,6],[1,4,6,7],[1,4,6,8],[1,4,6,9],[1,4,6,10],[1,4,7,7],[1,4,7,8],[1,4,7,9],[1,4,8,8],[1,5,5,6],[1,5,5,9],[1,5,5,10],[1,5,6,6],[1,5,6,7],[1,5,6,8],[1,5,6,9],[1,5,6,10],[1,5,7,8],[1,5,7,9],[1,5,7,10],[1,5,8,8],[1,5,8,9],[1,5,10,10],[1,6,6,6],[1,6,6,9],[1,6,6,10],[1,6,7,9],[1,6,8,8],[1,6,9,10],[1,7,7,10],[1,7,8,10],[1,7,9,9],[1,7,9,10],[1,8,8,9],[1,8,8,10],[2,2,2,7],[2,2,2,8],[2,2,3,5],[2,2,3,8],[2,2,3,9],[2,2,3,10],[2,2,4,4],[2,2,4,6],[2,2,4,7],[2,2,4,10],[2,2,5,8],[2,2,5,9],[2,2,6,8],[2,2,6,10],[2,2,7,7],[2,2,7,8],[2,2,8,8],[2,2,8,9],[2,2,8,10],[2,2,9,10],[2,3,3,6],[2,3,3,7],[2,3,3,8],[2,3,3,10],[2,3,4,5],[2,3,4,6],[2,3,4,7],[2,3,4,8],[2,3,4,10],[2,3,5,5],[2,3,5,6],[2,3,5,7],[2,3,5,9],[2,3,5,10],[2,3,6,6],[2,3,6,8],[2,3,6,9],[2,3,6,10],[2,3,7,10],[2,3,8,8],[2,3,8,9],[2,3,10,10],[2,4,4,4],[2,4,4,5],[2,4,4,6],[2,4,4,7],[2,4,4,8],[2,4,4,9],[2,4,4,10],[2,4,5,6],[2,4,5,8],[2,4,5,9],[2,4,6,6],[2,4,6,7],[2,4,6,9],[2,4,6,10],[2,4,7,7],[2,4,7,8],[2,4,7,10],[2,4,8,8],[2,4,8,9],[2,4,9,10],[2,5,5,9],[2,5,6,6],[2,5,6,7],[2,5,6,8],[2,5,7,8],[2,5,7,9],[2,5,8,8],[2,5,8,10],[2,5,9,10],[2,6,6,8],[2,6,6,9],[2,6,7,8],[2,6,7,10],[2,6,8,10],[2,6,9,10],[2,6,10,10],[2,7,8,8],[2,7,8,9],[2,7,9,10],[2,7,10,10],[2,8,8,9],[2,8,8,10],[2,8,9,9],[2,8,9,10],[3,3,3,3],[3,3,3,4],[3,3,3,7],[3,3,3,8],[3,3,3,10],[3,3,4,6],[3,3,4,8],[3,3,5,6],[3,3,5,7],[3,3,5,9],[3,3,6,7],[3,3,6,8],[3,3,6,10],[3,3,7,9],[3,3,8,9],[3,3,9,10],[3,4,4,4],[3,4,4,5],[3,4,4,6],[3,4,4,7],[3,4,4,8],[3,4,4,9],[3,4,4,10],[3,4,5,5],[3,4,5,6],[3,4,5,8],[3,4,5,9],[3,4,6,8],[3,4,6,9],[3,4,6,10],[3,4,7,7],[3,4,7,8],[3,4,7,9],[3,4,8,10],[3,4,10,10],[3,5,5,6],[3,5,5,7],[3,5,5,8],[3,5,6,6],[3,5,6,9],[3,5,7,8],[3,5,7,10],[3,5,8,9],[3,6,6,6],[3,6,6,7],[3,6,6,8],[3,6,6,10],[3,6,7,7],[3,6,7,9],[3,6,8,10],[3,6,9,9],[3,6,9,10],[3,7,7,8],[3,7,7,10],[3,7,8,8],[3,7,8,9],[3,7,9,9],[3,7,9,10],[3,7,10,10],[3,8,8,8],[3,8,8,9],[3,8,9,9],[3,8,9,10],[3,8,10,10],[3,9,9,9],[3,9,9,10],[4,4,4,6],[4,4,4,7],[4,4,4,8],[4,4,4,9],[4,4,4,10],[4,4,5,7],[4,4,5,8],[4,4,5,10],[4,4,6,8],[4,4,6,9],[4,4,7,8],[4,4,7,10],[4,4,8,9],[4,4,8,10],[4,5,5,5],[4,5,5,6],[4,5,5,9],[4,5,6,6],[4,5,6,7],[4,5,6,8],[4,5,6,10],[4,5,7,7],[4,5,7,9],[4,5,7,10],[4,5,8,9],[4,5,9,10],[4,6,6,6],[4,6,6,7],[4,6,6,9],[4,6,7,8],[4,6,7,10],[4,6,8,8],[4,6,8,9],[4,6,8,10],[4,6,9,9],[4,6,9,10],[4,6,10,10],[4,7,8,8],[4,7,9,10],[4,8,8,9],[4,8,8,10],[4,8,9,10],[4,8,10,10],[4,9,9,10],[5,5,5,6],[5,5,6,6],[5,5,6,7],[5,5,7,8],[5,5,8,9],[5,5,9,10],[5,6,6,8],[5,6,6,9],[5,6,7,8],[5,6,7,9],[5,6,8,8],[5,6,9,9],[5,6,9,10],[5,7,7,9],[5,7,7,10],[5,7,8,8],[5,7,8,9],[5,7,8,10],[5,7,9,10],[5,8,8,8],[5,8,8,10],[5,9,10,10],[6,6,6,8],[6,6,6,10],[6,6,7,9],[6,6,7,10],[6,6,8,9],[6,6,8,10],[6,7,7,10],[6,7,8,10],[6,7,9,9],[6,7,10,10],[6,8,8,8],[6,8,8,9],[6,8,9,10],[6,10,10,10],[7,7,9,10],[7,8,8,9],[7,8,8,10],[7,8,10,10],[8,8,8,10]];
//console.log(execute([5,5,8,8]));
cal2([5,5,8,8],[0,2,5,1])
arr1 = arr1.concat(arr2).concat(arr3);
for(var i=0;i<arr1.length;i++) {
    var t = execute(arr1[i]);
 if(t.length<3) {
     console.log(t[0]||arr1[i]);
 }
}
